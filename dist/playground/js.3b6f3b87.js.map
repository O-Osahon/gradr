{"version":3,"sources":["../../node_modules/tslib/tslib.es6.js","../src/constants.ts","../src/assert.ts","../src/crypt.ts","../src/deepCopy.ts","../src/deferred.ts","../src/environment.ts","../src/errors.ts","../src/json.ts","../src/jwt.ts","../src/obj.ts","../src/query.ts","../src/sha1.ts","../src/subscribe.ts","../src/validation.ts","../src/utf8.ts","../index.ts","../src/firebaseApp.ts","../src/firebaseNamespaceCore.ts","../src/firebaseNamespace.ts","../commons/js/utils.js","../../../../../.config/yarn/global/node_modules/parcel-bundler/src/builtins/bundle-url.js","../../../../../.config/yarn/global/node_modules/parcel-bundler/src/builtins/bundle-loader.js","js/module-manager.js","js/index.js","../../../../../.config/yarn/global/node_modules/parcel-bundler/src/builtins/loaders/browser/js-loader.js"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__rest","e","indexOf","getOwnPropertySymbols","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","__metadata","metadataKey","metadataValue","metadata","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","rejected","result","done","then","__generator","body","_","f","y","g","label","sent","trys","ops","verb","Symbol","iterator","v","op","TypeError","pop","push","__exportStar","m","exports","__values","o","__read","ar","error","__spread","concat","__await","__asyncGenerator","asyncIterator","q","a","resume","fulfill","settle","shift","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","raw","__importStar","mod","__esModule","k","default","__importDefault","tslib_1.__extends","stringToByteArray","ErrorFactory","deepCopy","deepExtend","patchProperty","createSubscribe","noop","trim","lowercase","toLowerCase","spacesToDashs","replace","rAF","wait","setTimeout","window","requestAnimationFrame","select","document","querySelector","bind","selectAll","querySelectorAll","setAttrs","node","attrs","keys","reduce","el","setAttribute","once","fn","args","output","goTo","view","data","url","current","classList","remove","add","state","expandedUrl","id","test","history","pushState","handleWindowPopState","onpopstate","exceptId","map","filter","partial","extractCode","code","styles","substring","script","markup","syncChain","fns","asyncChain","challenges","codebase","prevAudit","challenge","toSlug","loadStylesAndScripts","urls","loadError","oError","URIError","src","handleAsset","endsWith","createElement","onerror","appendChild","onload","js","link","head","href","css","prevLoadOp","codeMirrorAssets","mode","assets","markdown","htmlmixed","loadCodemirrorAssets","modeSpecificAssets","responseCanErr","response","ok","Error","status","afterKickoff","when","Date","now","startingAt","limit","setTime","getTime","getTimezoneOffset","withinDeadline","endingAt","timeUnits","second","minute","hour","day","dateTimeDiff","currentDate","endDate","type","diffType","includes","unitDiff","diffMs","Math","round","countDown","run","from","to","callback","bundleURL","getBundleURLCached","getBundleURL","err","matches","stack","match","getBaseURL","require","loadBundlesLazy","bundles","isArray","LazyPromise","loadBundles","slice","all","loadBundle","bundleLoaders","registerBundleLoader","loader","module","load","register","bundle","lastIndexOf","bundleLoader","resolved","catch","executor","promise","onSuccess","onError","importFirebaseInitializer","importPlayground","toast","testId","appUser","provider","uiIsBuilt","invalidURLMsg","testNotYetOpenMsg","notify","msg","textContent","open","signIn","auth","signInWithPopup","message","console","warn","setupSignIn","signInBtn","addEventListener","fetchTheImpliedAssessment","assessmentId","split","reverse","join","firebase","firestore","collection","doc","get","initFirebase","fb","init","checkIfAssessmentIsValid","assessmentDoc","exists","checkIfAssessmentIsLive","enterPlayground","assessment","playground","enter","user","enterHome","removeAttribute","initServiceBot","setupAuthentication","GithubAuthProvider","addScope","setCustomParameters","allow_signup","onAuthStateChanged","takeOff","mdc","snackbar","MDCSnackbar","attachTo","pathname","location","async","charset","getElementsByTagName"],"mappings":"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","file":"js.3b6f3b87.js","sourceRoot":"../../src/playground","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Firebase constants.  Some of these (@defines) can be overridden at compile-time.\n */\n\nexport const CONSTANTS = {\n  /**\n   * @define {boolean} Whether this is the client Node.js SDK.\n   */\n  NODE_CLIENT: false,\n  /**\n   * @define {boolean} Whether this is the Admin Node.js SDK.\n   */\n  NODE_ADMIN: false,\n\n  /**\n   * Firebase SDK Version\n   */\n  SDK_VERSION: '${JSCORE_VERSION}'\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CONSTANTS } from './constants';\n\n/**\n * Throws an error if the provided assertion is falsy\n * @param {*} assertion The assertion to be tested for falsiness\n * @param {!string} message The message to display if the check fails\n */\nexport const assert = function(assertion, message) {\n  if (!assertion) {\n    throw assertionError(message);\n  }\n};\n\n/**\n * Returns an Error object suitable for throwing.\n * @param {string} message\n * @return {!Error}\n */\nexport const assertionError = function(message) {\n  return new Error(\n    'Firebase Database (' +\n      CONSTANTS.SDK_VERSION +\n      ') INTERNAL ASSERT FAILED: ' +\n      message\n  );\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst stringToByteArray = function(str) {\n  // TODO(user): Use native implementations if/when available\n  var out = [],\n    p = 0;\n  for (var i = 0; i < str.length; i++) {\n    var c = str.charCodeAt(i);\n    if (c < 128) {\n      out[p++] = c;\n    } else if (c < 2048) {\n      out[p++] = (c >> 6) | 192;\n      out[p++] = (c & 63) | 128;\n    } else if (\n      (c & 0xfc00) == 0xd800 &&\n      i + 1 < str.length &&\n      (str.charCodeAt(i + 1) & 0xfc00) == 0xdc00\n    ) {\n      // Surrogate Pair\n      c = 0x10000 + ((c & 0x03ff) << 10) + (str.charCodeAt(++i) & 0x03ff);\n      out[p++] = (c >> 18) | 240;\n      out[p++] = ((c >> 12) & 63) | 128;\n      out[p++] = ((c >> 6) & 63) | 128;\n      out[p++] = (c & 63) | 128;\n    } else {\n      out[p++] = (c >> 12) | 224;\n      out[p++] = ((c >> 6) & 63) | 128;\n      out[p++] = (c & 63) | 128;\n    }\n  }\n  return out;\n};\n\n/**\n * Turns an array of numbers into the string given by the concatenation of the\n * characters to which the numbers correspond.\n * @param {Array<number>} bytes Array of numbers representing characters.\n * @return {string} Stringification of the array.\n */\nconst byteArrayToString = function(bytes) {\n  // TODO(user): Use native implementations if/when available\n  var out = [],\n    pos = 0,\n    c = 0;\n  while (pos < bytes.length) {\n    var c1 = bytes[pos++];\n    if (c1 < 128) {\n      out[c++] = String.fromCharCode(c1);\n    } else if (c1 > 191 && c1 < 224) {\n      var c2 = bytes[pos++];\n      out[c++] = String.fromCharCode(((c1 & 31) << 6) | (c2 & 63));\n    } else if (c1 > 239 && c1 < 365) {\n      // Surrogate Pair\n      var c2 = bytes[pos++];\n      var c3 = bytes[pos++];\n      var c4 = bytes[pos++];\n      var u =\n        (((c1 & 7) << 18) | ((c2 & 63) << 12) | ((c3 & 63) << 6) | (c4 & 63)) -\n        0x10000;\n      out[c++] = String.fromCharCode(0xd800 + (u >> 10));\n      out[c++] = String.fromCharCode(0xdc00 + (u & 1023));\n    } else {\n      var c2 = bytes[pos++];\n      var c3 = bytes[pos++];\n      out[c++] = String.fromCharCode(\n        ((c1 & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63)\n      );\n    }\n  }\n  return out.join('');\n};\n\n// Static lookup maps, lazily populated by init_()\nexport const base64 = {\n  /**\n   * Maps bytes to characters.\n   * @type {Object}\n   * @private\n   */\n  byteToCharMap_: null,\n\n  /**\n   * Maps characters to bytes.\n   * @type {Object}\n   * @private\n   */\n  charToByteMap_: null,\n\n  /**\n   * Maps bytes to websafe characters.\n   * @type {Object}\n   * @private\n   */\n  byteToCharMapWebSafe_: null,\n\n  /**\n   * Maps websafe characters to bytes.\n   * @type {Object}\n   * @private\n   */\n  charToByteMapWebSafe_: null,\n\n  /**\n   * Our default alphabet, shared between\n   * ENCODED_VALS and ENCODED_VALS_WEBSAFE\n   * @type {string}\n   */\n  ENCODED_VALS_BASE:\n    'ABCDEFGHIJKLMNOPQRSTUVWXYZ' + 'abcdefghijklmnopqrstuvwxyz' + '0123456789',\n\n  /**\n   * Our default alphabet. Value 64 (=) is special; it means \"nothing.\"\n   * @type {string}\n   */\n  get ENCODED_VALS() {\n    return this.ENCODED_VALS_BASE + '+/=';\n  },\n\n  /**\n   * Our websafe alphabet.\n   * @type {string}\n   */\n  get ENCODED_VALS_WEBSAFE() {\n    return this.ENCODED_VALS_BASE + '-_.';\n  },\n\n  /**\n   * Whether this browser supports the atob and btoa functions. This extension\n   * started at Mozilla but is now implemented by many browsers. We use the\n   * ASSUME_* variables to avoid pulling in the full useragent detection library\n   * but still allowing the standard per-browser compilations.\n   *\n   * @type {boolean}\n   */\n  HAS_NATIVE_SUPPORT: typeof atob === 'function',\n\n  /**\n   * Base64-encode an array of bytes.\n   *\n   * @param {Array<number>|Uint8Array} input An array of bytes (numbers with\n   *     value in [0, 255]) to encode.\n   * @param {boolean=} opt_webSafe Boolean indicating we should use the\n   *     alternative alphabet.\n   * @return {string} The base64 encoded string.\n   */\n  encodeByteArray(input, opt_webSafe?) {\n    if (!Array.isArray(input)) {\n      throw Error('encodeByteArray takes an array as a parameter');\n    }\n\n    this.init_();\n\n    var byteToCharMap = opt_webSafe\n      ? this.byteToCharMapWebSafe_\n      : this.byteToCharMap_;\n\n    var output = [];\n\n    for (var i = 0; i < input.length; i += 3) {\n      var byte1 = input[i];\n      var haveByte2 = i + 1 < input.length;\n      var byte2 = haveByte2 ? input[i + 1] : 0;\n      var haveByte3 = i + 2 < input.length;\n      var byte3 = haveByte3 ? input[i + 2] : 0;\n\n      var outByte1 = byte1 >> 2;\n      var outByte2 = ((byte1 & 0x03) << 4) | (byte2 >> 4);\n      var outByte3 = ((byte2 & 0x0f) << 2) | (byte3 >> 6);\n      var outByte4 = byte3 & 0x3f;\n\n      if (!haveByte3) {\n        outByte4 = 64;\n\n        if (!haveByte2) {\n          outByte3 = 64;\n        }\n      }\n\n      output.push(\n        byteToCharMap[outByte1],\n        byteToCharMap[outByte2],\n        byteToCharMap[outByte3],\n        byteToCharMap[outByte4]\n      );\n    }\n\n    return output.join('');\n  },\n\n  /**\n   * Base64-encode a string.\n   *\n   * @param {string} input A string to encode.\n   * @param {boolean=} opt_webSafe If true, we should use the\n   *     alternative alphabet.\n   * @return {string} The base64 encoded string.\n   */\n  encodeString(input, opt_webSafe) {\n    // Shortcut for Mozilla browsers that implement\n    // a native base64 encoder in the form of \"btoa/atob\"\n    if (this.HAS_NATIVE_SUPPORT && !opt_webSafe) {\n      return btoa(input);\n    }\n    return this.encodeByteArray(stringToByteArray(input), opt_webSafe);\n  },\n\n  /**\n   * Base64-decode a string.\n   *\n   * @param {string} input to decode.\n   * @param {boolean=} opt_webSafe True if we should use the\n   *     alternative alphabet.\n   * @return {string} string representing the decoded value.\n   */\n  decodeString(input, opt_webSafe) {\n    // Shortcut for Mozilla browsers that implement\n    // a native base64 encoder in the form of \"btoa/atob\"\n    if (this.HAS_NATIVE_SUPPORT && !opt_webSafe) {\n      return atob(input);\n    }\n    return byteArrayToString(this.decodeStringToByteArray(input, opt_webSafe));\n  },\n\n  /**\n   * Base64-decode a string.\n   *\n   * In base-64 decoding, groups of four characters are converted into three\n   * bytes.  If the encoder did not apply padding, the input length may not\n   * be a multiple of 4.\n   *\n   * In this case, the last group will have fewer than 4 characters, and\n   * padding will be inferred.  If the group has one or two characters, it decodes\n   * to one byte.  If the group has three characters, it decodes to two bytes.\n   *\n   * @param {string} input Input to decode.\n   * @param {boolean=} opt_webSafe True if we should use the web-safe alphabet.\n   * @return {!Array<number>} bytes representing the decoded value.\n   */\n  decodeStringToByteArray(input, opt_webSafe) {\n    this.init_();\n\n    var charToByteMap = opt_webSafe\n      ? this.charToByteMapWebSafe_\n      : this.charToByteMap_;\n\n    var output = [];\n\n    for (var i = 0; i < input.length; ) {\n      var byte1 = charToByteMap[input.charAt(i++)];\n\n      var haveByte2 = i < input.length;\n      var byte2 = haveByte2 ? charToByteMap[input.charAt(i)] : 0;\n      ++i;\n\n      var haveByte3 = i < input.length;\n      var byte3 = haveByte3 ? charToByteMap[input.charAt(i)] : 64;\n      ++i;\n\n      var haveByte4 = i < input.length;\n      var byte4 = haveByte4 ? charToByteMap[input.charAt(i)] : 64;\n      ++i;\n\n      if (byte1 == null || byte2 == null || byte3 == null || byte4 == null) {\n        throw Error();\n      }\n\n      var outByte1 = (byte1 << 2) | (byte2 >> 4);\n      output.push(outByte1);\n\n      if (byte3 != 64) {\n        var outByte2 = ((byte2 << 4) & 0xf0) | (byte3 >> 2);\n        output.push(outByte2);\n\n        if (byte4 != 64) {\n          var outByte3 = ((byte3 << 6) & 0xc0) | byte4;\n          output.push(outByte3);\n        }\n      }\n    }\n\n    return output;\n  },\n\n  /**\n   * Lazy static initialization function. Called before\n   * accessing any of the static map variables.\n   * @private\n   */\n  init_() {\n    if (!this.byteToCharMap_) {\n      this.byteToCharMap_ = {};\n      this.charToByteMap_ = {};\n      this.byteToCharMapWebSafe_ = {};\n      this.charToByteMapWebSafe_ = {};\n\n      // We want quick mappings back and forth, so we precompute two maps.\n      for (var i = 0; i < this.ENCODED_VALS.length; i++) {\n        this.byteToCharMap_[i] = this.ENCODED_VALS.charAt(i);\n        this.charToByteMap_[this.byteToCharMap_[i]] = i;\n        this.byteToCharMapWebSafe_[i] = this.ENCODED_VALS_WEBSAFE.charAt(i);\n        this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]] = i;\n\n        // Be forgiving when decoding and correctly decode both encodings.\n        if (i >= this.ENCODED_VALS_BASE.length) {\n          this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)] = i;\n          this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)] = i;\n        }\n      }\n    }\n  }\n};\n\n/**\n * URL-safe base64 encoding\n * @param {!string} str\n * @return {!string}\n */\nexport const base64Encode = function(str: string): string {\n  const utf8Bytes = stringToByteArray(str);\n  return base64.encodeByteArray(utf8Bytes, true);\n};\n\n/**\n * URL-safe base64 decoding\n *\n * NOTE: DO NOT use the global atob() function - it does NOT support the\n * base64Url variant encoding.\n *\n * @param {string} str To be decoded\n * @return {?string} Decoded result, if possible\n */\nexport const base64Decode = function(str: string): string | null {\n  try {\n    return base64.decodeString(str, true);\n  } catch (e) {\n    console.error('base64Decode failed: ', e);\n  }\n  return null;\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Do a deep-copy of basic JavaScript Objects or Arrays.\n */\nexport function deepCopy<T>(value: T): T {\n  return deepExtend(undefined, value);\n}\n\n/**\n * Copy properties from source to target (recursively allows extension\n * of Objects and Arrays).  Scalar values in the target are over-written.\n * If target is undefined, an object of the appropriate type will be created\n * (and returned).\n *\n * We recursively copy all child properties of plain Objects in the source- so\n * that namespace- like dictionaries are merged.\n *\n * Note that the target can be a function, in which case the properties in\n * the source Object are copied onto it as static properties of the Function.\n */\nexport function deepExtend(target: any, source: any): any {\n  if (!(source instanceof Object)) {\n    return source;\n  }\n\n  switch (source.constructor) {\n    case Date:\n      // Treat Dates like scalars; if the target date object had any child\n      // properties - they will be lost!\n      let dateValue = (source as any) as Date;\n      return new Date(dateValue.getTime());\n\n    case Object:\n      if (target === undefined) {\n        target = {};\n      }\n      break;\n\n    case Array:\n      // Always copy the array source and overwrite the target.\n      target = [];\n      break;\n\n    default:\n      // Not a plain Object - treat it as a scalar.\n      return source;\n  }\n\n  for (let prop in source) {\n    if (!source.hasOwnProperty(prop)) {\n      continue;\n    }\n    target[prop] = deepExtend(target[prop], source[prop]);\n  }\n\n  return target;\n}\n\n// TODO: Really needed (for JSCompiler type checking)?\nexport function patchProperty(obj: any, prop: string, value: any) {\n  obj[prop] = value;\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport class Deferred<R> {\n  promise: Promise<R>;\n  reject;\n  resolve;\n  constructor() {\n    this.promise = new Promise((resolve, reject) => {\n      this.resolve = resolve;\n      this.reject = reject;\n    });\n  }\n\n  /**\n   * Our API internals are not promiseified and cannot because our callback APIs have subtle expectations around\n   * invoking promises inline, which Promises are forbidden to do. This method accepts an optional node-style callback\n   * and returns a node-style callback which will resolve or reject the Deferred's promise.\n   * @param {((?function(?(Error)): (?|undefined))| (?function(?(Error),?=): (?|undefined)))=} callback\n   * @return {!function(?(Error), ?=)}\n   */\n  wrapCallback(callback?) {\n    return (error, value?) => {\n      if (error) {\n        this.reject(error);\n      } else {\n        this.resolve(value);\n      }\n      if (typeof callback === 'function') {\n        // Attaching noop handler just in case developer wasn't expecting\n        // promises\n        this.promise.catch(() => {});\n\n        // Some of our callbacks don't expect a value and our own tests\n        // assert that the parameter length is 1\n        if (callback.length === 1) {\n          callback(error);\n        } else {\n          callback(error, value);\n        }\n      }\n    };\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CONSTANTS } from './constants';\n\n/**\n * Returns navigator.userAgent string or '' if it's not defined.\n * @return {string} user agent string\n */\nexport const getUA = function() {\n  if (\n    typeof navigator !== 'undefined' &&\n    typeof navigator['userAgent'] === 'string'\n  ) {\n    return navigator['userAgent'];\n  } else {\n    return '';\n  }\n};\n\n/**\n * Detect Cordova / PhoneGap / Ionic frameworks on a mobile device.\n *\n * Deliberately does not rely on checking `file://` URLs (as this fails PhoneGap in the Ripple emulator) nor\n * Cordova `onDeviceReady`, which would normally wait for a callback.\n *\n * @return {boolean} isMobileCordova\n */\nexport const isMobileCordova = function() {\n  return (\n    typeof window !== 'undefined' &&\n    !!(window['cordova'] || window['phonegap'] || window['PhoneGap']) &&\n    /ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())\n  );\n};\n\n/**\n * Detect React Native.\n *\n * @return {boolean} True if ReactNative environment is detected.\n */\nexport const isReactNative = function() {\n  return (\n    typeof navigator === 'object' && navigator['product'] === 'ReactNative'\n  );\n};\n\n/**\n * Detect Node.js.\n *\n * @return {boolean} True if Node.js environment is detected.\n */\nexport const isNodeSdk = function() {\n  return CONSTANTS.NODE_CLIENT === true || CONSTANTS.NODE_ADMIN === true;\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @fileoverview Standardized Firebase Error.\n *\n * Usage:\n *\n *   // Typescript string literals for type-safe codes\n *   type Err =\n *     'unknown' |\n *     'object-not-found'\n *     ;\n *\n *   // Closure enum for type-safe error codes\n *   // at-enum {string}\n *   var Err = {\n *     UNKNOWN: 'unknown',\n *     OBJECT_NOT_FOUND: 'object-not-found',\n *   }\n *\n *   let errors: Map<Err, string> = {\n *     'generic-error': \"Unknown error\",\n *     'file-not-found': \"Could not find file: {$file}\",\n *   };\n *\n *   // Type-safe function - must pass a valid error code as param.\n *   let error = new ErrorFactory<Err>('service', 'Service', errors);\n *\n *   ...\n *   throw error.create(Err.GENERIC);\n *   ...\n *   throw error.create(Err.FILE_NOT_FOUND, {'file': fileName});\n *   ...\n *   // Service: Could not file file: foo.txt (service/file-not-found).\n *\n *   catch (e) {\n *     assert(e.message === \"Could not find file: foo.txt.\");\n *     if (e.code === 'service/file-not-found') {\n *       console.log(\"Could not read file: \" + e['file']);\n *     }\n *   }\n */\n\nexport type ErrorMap<ErrorCode extends string> = {\n  readonly [K in ErrorCode]: string\n};\n\nconst ERROR_NAME = 'FirebaseError';\n\nexport interface StringLike {\n  toString(): string;\n}\n\nexport interface ErrorData {\n  [key: string]: StringLike | undefined;\n}\n\nexport interface FirebaseError extends Error, ErrorData {\n  // Unique code for error - format is service/error-code-string.\n  readonly code: string;\n\n  // Developer-friendly error message.\n  readonly message: string;\n\n  // Always 'FirebaseError'.\n  readonly name: typeof ERROR_NAME;\n\n  // Where available - stack backtrace in a string.\n  readonly stack?: string;\n}\n\n// Based on code from:\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error#Custom_Error_Types\nexport class FirebaseError extends Error {\n  readonly name = ERROR_NAME;\n\n  constructor(readonly code: string, message: string) {\n    super(message);\n\n    // Fix For ES5\n    // https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work\n    Object.setPrototypeOf(this, FirebaseError.prototype);\n\n    // Maintains proper stack trace for where our error was thrown.\n    // Only available on V8.\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, ErrorFactory.prototype.create);\n    }\n  }\n}\n\nexport class ErrorFactory<ErrorCode extends string> {\n  constructor(\n    private readonly service: string,\n    private readonly serviceName: string,\n    private readonly errors: ErrorMap<ErrorCode>\n  ) {}\n\n  create(code: ErrorCode, data: ErrorData = {}): FirebaseError {\n    const fullCode = `${this.service}/${code}`;\n    const template = this.errors[code];\n\n    const message = template ? replaceTemplate(template, data) : 'Error';\n    // Service Name: Error message (service/code).\n    const fullMessage = `${this.serviceName}: ${message} (${fullCode}).`;\n\n    const error = new FirebaseError(fullCode, fullMessage);\n\n    // Keys with an underscore at the end of their name are not included in\n    // error.data for some reason.\n    // TODO: Replace with Object.entries when lib is updated to es2017.\n    for (const key of Object.keys(data)) {\n      if (key.slice(-1) !== '_') {\n        if (key in error) {\n          console.warn(\n            `Overwriting FirebaseError base field \"${key}\" can cause unexpected behavior.`\n          );\n        }\n        error[key] = data[key];\n      }\n    }\n\n    return error;\n  }\n}\n\nfunction replaceTemplate(template: string, data: ErrorData): string {\n  return template.replace(PATTERN, (_, key) => {\n    const value = data[key];\n    return value != null ? value.toString() : `<${key}?>`;\n  });\n}\n\nconst PATTERN = /\\{\\$([^}]+)}/g;\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Evaluates a JSON string into a javascript object.\n *\n * @param {string} str A string containing JSON.\n * @return {*} The javascript object representing the specified JSON.\n */\nexport function jsonEval(str) {\n  return JSON.parse(str);\n}\n\n/**\n * Returns JSON representing a javascript object.\n * @param {*} data Javascript object to be stringified.\n * @return {string} The JSON contents of the object.\n */\nexport function stringify(data) {\n  return JSON.stringify(data);\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { base64Decode } from './crypt';\nimport { jsonEval } from './json';\n\n/**\n * Decodes a Firebase auth. token into constituent parts.\n *\n * Notes:\n * - May return with invalid / incomplete claims if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n *\n * @param {?string} token\n * @return {{header: *, claims: *, data: *, signature: string}}\n */\nexport const decode = function(token) {\n  var header = {},\n    claims = {},\n    data = {},\n    signature = '';\n\n  try {\n    var parts = token.split('.');\n    header = jsonEval(base64Decode(parts[0]) || '');\n    claims = jsonEval(base64Decode(parts[1]) || '');\n    signature = parts[2];\n    data = claims['d'] || {};\n    delete claims['d'];\n  } catch (e) {}\n\n  return {\n    header: header,\n    claims: claims,\n    data: data,\n    signature: signature\n  };\n};\n\n/**\n * Decodes a Firebase auth. token and checks the validity of its time-based claims. Will return true if the\n * token is within the time window authorized by the 'nbf' (not-before) and 'iat' (issued-at) claims.\n *\n * Notes:\n * - May return a false negative if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n *\n * @param {?string} token\n * @return {boolean}\n */\nexport const isValidTimestamp = function(token) {\n  var claims = decode(token).claims,\n    now = Math.floor(new Date().getTime() / 1000),\n    validSince,\n    validUntil;\n\n  if (typeof claims === 'object') {\n    if (claims.hasOwnProperty('nbf')) {\n      validSince = claims['nbf'];\n    } else if (claims.hasOwnProperty('iat')) {\n      validSince = claims['iat'];\n    }\n\n    if (claims.hasOwnProperty('exp')) {\n      validUntil = claims['exp'];\n    } else {\n      // token will expire after 24h by default\n      validUntil = validSince + 86400;\n    }\n  }\n\n  return (\n    now && validSince && validUntil && now >= validSince && now <= validUntil\n  );\n};\n\n/**\n * Decodes a Firebase auth. token and returns its issued at time if valid, null otherwise.\n *\n * Notes:\n * - May return null if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n *\n * @param {?string} token\n * @return {?number}\n */\nexport const issuedAtTime = function(token) {\n  var claims = decode(token).claims;\n  if (typeof claims === 'object' && claims.hasOwnProperty('iat')) {\n    return claims['iat'];\n  }\n  return null;\n};\n\n/**\n * Decodes a Firebase auth. token and checks the validity of its format. Expects a valid issued-at time.\n *\n * Notes:\n * - May return a false negative if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n *\n * @param {?string} token\n * @return {boolean}\n */\nexport const isValidFormat = function(token) {\n  var decoded = decode(token),\n    claims = decoded.claims;\n\n  return !!claims && typeof claims === 'object' && claims.hasOwnProperty('iat');\n};\n\n/**\n * Attempts to peer into an auth token and determine if it's an admin auth token by looking at the claims portion.\n *\n * Notes:\n * - May return a false negative if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n *\n * @param {?string} token\n * @return {boolean}\n */\nexport const isAdmin = function(token) {\n  var claims = decode(token).claims;\n  return typeof claims === 'object' && claims['admin'] === true;\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// See http://www.devthought.com/2012/01/18/an-object-is-not-a-hash/\n\nexport const contains = function(obj, key) {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n};\n\nexport const safeGet = function(obj, key) {\n  if (Object.prototype.hasOwnProperty.call(obj, key)) return obj[key];\n  // else return undefined.\n};\n\n/**\n * Enumerates the keys/values in an object, excluding keys defined on the prototype.\n *\n * @param {?Object.<K,V>} obj Object to enumerate.\n * @param {!function(K, V)} fn Function to call for each key and value.\n * @template K,V\n */\nexport const forEach = function(obj, fn) {\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      fn(key, obj[key]);\n    }\n  }\n};\n\n/**\n * Copies all the (own) properties from one object to another.\n * @param {!Object} objTo\n * @param {!Object} objFrom\n * @return {!Object} objTo\n */\nexport const extend = function(objTo, objFrom) {\n  forEach(objFrom, function(key, value) {\n    objTo[key] = value;\n  });\n  return objTo;\n};\n\n/**\n * Returns a clone of the specified object.\n * @param {!Object} obj\n * @return {!Object} cloned obj.\n */\nexport const clone = function(obj) {\n  return extend({}, obj);\n};\n\n/**\n * Returns true if obj has typeof \"object\" and is not null.  Unlike goog.isObject(), does not return true\n * for functions.\n *\n * @param obj {*} A potential object.\n * @returns {boolean} True if it's an object.\n */\nexport const isNonNullObject = function(obj) {\n  return typeof obj === 'object' && obj !== null;\n};\n\nexport const isEmpty = function(obj) {\n  for (var key in obj) {\n    return false;\n  }\n  return true;\n};\n\nexport const getCount = function(obj) {\n  var rv = 0;\n  for (var key in obj) {\n    rv++;\n  }\n  return rv;\n};\n\nexport const map = function(obj, f, opt_obj?) {\n  var res = {};\n  for (var key in obj) {\n    res[key] = f.call(opt_obj, obj[key], key, obj);\n  }\n  return res;\n};\n\nexport const findKey = function(obj, fn, opt_this?) {\n  for (var key in obj) {\n    if (fn.call(opt_this, obj[key], key, obj)) {\n      return key;\n    }\n  }\n  return undefined;\n};\n\nexport const findValue = function(obj, fn, opt_this?) {\n  var key = findKey(obj, fn, opt_this);\n  return key && obj[key];\n};\n\nexport const getAnyKey = function(obj) {\n  for (var key in obj) {\n    return key;\n  }\n};\n\nexport const getValues = function(obj) {\n  var res = [];\n  var i = 0;\n  for (var key in obj) {\n    res[i++] = obj[key];\n  }\n  return res;\n};\n\n/**\n * Tests whether every key/value pair in an object pass the test implemented\n * by the provided function\n *\n * @param {?Object.<K,V>} obj Object to test.\n * @param {!function(K, V)} fn Function to call for each key and value.\n * @template K,V\n */\nexport const every = function<V>(\n  obj: Object,\n  fn: (k: string, v?: V) => boolean\n): boolean {\n  for (let key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      if (!fn(key, obj[key])) {\n        return false;\n      }\n    }\n  }\n  return true;\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { forEach } from './obj';\n\n/**\n * Returns a querystring-formatted string (e.g. &arg=val&arg2=val2) from a params\n * object (e.g. {arg: 'val', arg2: 'val2'})\n * Note: You must prepend it with ? when adding it to a URL.\n *\n * @param {!Object} querystringParams\n * @return {string}\n */\nexport const querystring = function(querystringParams) {\n  var params = [];\n  forEach(querystringParams, function(key, value) {\n    if (Array.isArray(value)) {\n      value.forEach(function(arrayVal) {\n        params.push(\n          encodeURIComponent(key) + '=' + encodeURIComponent(arrayVal)\n        );\n      });\n    } else {\n      params.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));\n    }\n  });\n  return params.length ? '&' + params.join('&') : '';\n};\n\n/**\n * Decodes a querystring (e.g. ?arg=val&arg2=val2) into a params object (e.g. {arg: 'val', arg2: 'val2'})\n *\n * @param {string} querystring\n * @return {!Object}\n */\nexport const querystringDecode = function(querystring) {\n  var obj = {};\n  var tokens = querystring.replace(/^\\?/, '').split('&');\n\n  tokens.forEach(function(token) {\n    if (token) {\n      var key = token.split('=');\n      obj[key[0]] = key[1];\n    }\n  });\n  return obj;\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview SHA-1 cryptographic hash.\n * Variable names follow the notation in FIPS PUB 180-3:\n * http://csrc.nist.gov/publications/fips/fips180-3/fips180-3_final.pdf.\n *\n * Usage:\n *   var sha1 = new sha1();\n *   sha1.update(bytes);\n *   var hash = sha1.digest();\n *\n * Performance:\n *   Chrome 23:   ~400 Mbit/s\n *   Firefox 16:  ~250 Mbit/s\n *\n */\n\n/**\n * SHA-1 cryptographic hash constructor.\n *\n * The properties declared here are discussed in the above algorithm document.\n * @constructor\n * @final\n * @struct\n */\nexport class Sha1 {\n  /**\n   * Holds the previous values of accumulated variables a-e in the compress_\n   * function.\n   * @type {!Array<number>}\n   * @private\n   */\n  private chain_: Array<number> = [];\n\n  /**\n   * A buffer holding the partially computed hash result.\n   * @type {!Array<number>}\n   * @private\n   */\n  private buf_: Array<number> = [];\n\n  /**\n   * An array of 80 bytes, each a part of the message to be hashed.  Referred to\n   * as the message schedule in the docs.\n   * @type {!Array<number>}\n   * @private\n   */\n  private W_: Array<number> = [];\n\n  /**\n   * Contains data needed to pad messages less than 64 bytes.\n   * @type {!Array<number>}\n   * @private\n   */\n  private pad_: Array<number> = [];\n\n  /**\n   * @private {number}\n   */\n  private inbuf_: number = 0;\n\n  /**\n   * @private {number}\n   */\n  private total_: number = 0;\n\n  blockSize: number;\n\n  constructor() {\n    this.blockSize = 512 / 8;\n\n    this.pad_[0] = 128;\n    for (var i = 1; i < this.blockSize; ++i) {\n      this.pad_[i] = 0;\n    }\n\n    this.reset();\n  }\n\n  reset() {\n    this.chain_[0] = 0x67452301;\n    this.chain_[1] = 0xefcdab89;\n    this.chain_[2] = 0x98badcfe;\n    this.chain_[3] = 0x10325476;\n    this.chain_[4] = 0xc3d2e1f0;\n\n    this.inbuf_ = 0;\n    this.total_ = 0;\n  }\n\n  /**\n   * Internal compress helper function.\n   * @param {!Array<number>|!Uint8Array|string} buf Block to compress.\n   * @param {number=} opt_offset Offset of the block in the buffer.\n   * @private\n   */\n  compress_(buf, opt_offset?) {\n    if (!opt_offset) {\n      opt_offset = 0;\n    }\n\n    var W = this.W_;\n\n    // get 16 big endian words\n    if (typeof buf === 'string') {\n      for (var i = 0; i < 16; i++) {\n        // TODO(user): [bug 8140122] Recent versions of Safari for Mac OS and iOS\n        // have a bug that turns the post-increment ++ operator into pre-increment\n        // during JIT compilation.  We have code that depends heavily on SHA-1 for\n        // correctness and which is affected by this bug, so I've removed all uses\n        // of post-increment ++ in which the result value is used.  We can revert\n        // this change once the Safari bug\n        // (https://bugs.webkit.org/show_bug.cgi?id=109036) has been fixed and\n        // most clients have been updated.\n        W[i] =\n          (buf.charCodeAt(opt_offset) << 24) |\n          (buf.charCodeAt(opt_offset + 1) << 16) |\n          (buf.charCodeAt(opt_offset + 2) << 8) |\n          buf.charCodeAt(opt_offset + 3);\n        opt_offset += 4;\n      }\n    } else {\n      for (var i = 0; i < 16; i++) {\n        W[i] =\n          (buf[opt_offset] << 24) |\n          (buf[opt_offset + 1] << 16) |\n          (buf[opt_offset + 2] << 8) |\n          buf[opt_offset + 3];\n        opt_offset += 4;\n      }\n    }\n\n    // expand to 80 words\n    for (var i = 16; i < 80; i++) {\n      var t = W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16];\n      W[i] = ((t << 1) | (t >>> 31)) & 0xffffffff;\n    }\n\n    var a = this.chain_[0];\n    var b = this.chain_[1];\n    var c = this.chain_[2];\n    var d = this.chain_[3];\n    var e = this.chain_[4];\n    var f, k;\n\n    // TODO(user): Try to unroll this loop to speed up the computation.\n    for (var i = 0; i < 80; i++) {\n      if (i < 40) {\n        if (i < 20) {\n          f = d ^ (b & (c ^ d));\n          k = 0x5a827999;\n        } else {\n          f = b ^ c ^ d;\n          k = 0x6ed9eba1;\n        }\n      } else {\n        if (i < 60) {\n          f = (b & c) | (d & (b | c));\n          k = 0x8f1bbcdc;\n        } else {\n          f = b ^ c ^ d;\n          k = 0xca62c1d6;\n        }\n      }\n\n      var t = (((a << 5) | (a >>> 27)) + f + e + k + W[i]) & 0xffffffff;\n      e = d;\n      d = c;\n      c = ((b << 30) | (b >>> 2)) & 0xffffffff;\n      b = a;\n      a = t;\n    }\n\n    this.chain_[0] = (this.chain_[0] + a) & 0xffffffff;\n    this.chain_[1] = (this.chain_[1] + b) & 0xffffffff;\n    this.chain_[2] = (this.chain_[2] + c) & 0xffffffff;\n    this.chain_[3] = (this.chain_[3] + d) & 0xffffffff;\n    this.chain_[4] = (this.chain_[4] + e) & 0xffffffff;\n  }\n\n  update(bytes, opt_length?) {\n    // TODO(johnlenz): tighten the function signature and remove this check\n    if (bytes == null) {\n      return;\n    }\n\n    if (opt_length === undefined) {\n      opt_length = bytes.length;\n    }\n\n    var lengthMinusBlock = opt_length - this.blockSize;\n    var n = 0;\n    // Using local instead of member variables gives ~5% speedup on Firefox 16.\n    var buf = this.buf_;\n    var inbuf = this.inbuf_;\n\n    // The outer while loop should execute at most twice.\n    while (n < opt_length) {\n      // When we have no data in the block to top up, we can directly process the\n      // input buffer (assuming it contains sufficient data). This gives ~25%\n      // speedup on Chrome 23 and ~15% speedup on Firefox 16, but requires that\n      // the data is provided in large chunks (or in multiples of 64 bytes).\n      if (inbuf == 0) {\n        while (n <= lengthMinusBlock) {\n          this.compress_(bytes, n);\n          n += this.blockSize;\n        }\n      }\n\n      if (typeof bytes === 'string') {\n        while (n < opt_length) {\n          buf[inbuf] = bytes.charCodeAt(n);\n          ++inbuf;\n          ++n;\n          if (inbuf == this.blockSize) {\n            this.compress_(buf);\n            inbuf = 0;\n            // Jump to the outer loop so we use the full-block optimization.\n            break;\n          }\n        }\n      } else {\n        while (n < opt_length) {\n          buf[inbuf] = bytes[n];\n          ++inbuf;\n          ++n;\n          if (inbuf == this.blockSize) {\n            this.compress_(buf);\n            inbuf = 0;\n            // Jump to the outer loop so we use the full-block optimization.\n            break;\n          }\n        }\n      }\n    }\n\n    this.inbuf_ = inbuf;\n    this.total_ += opt_length;\n  }\n\n  /** @override */\n  digest() {\n    var digest = [];\n    var totalBits = this.total_ * 8;\n\n    // Add pad 0x80 0x00*.\n    if (this.inbuf_ < 56) {\n      this.update(this.pad_, 56 - this.inbuf_);\n    } else {\n      this.update(this.pad_, this.blockSize - (this.inbuf_ - 56));\n    }\n\n    // Add # bits.\n    for (var i = this.blockSize - 1; i >= 56; i--) {\n      this.buf_[i] = totalBits & 255;\n      totalBits /= 256; // Don't use bit-shifting here!\n    }\n\n    this.compress_(this.buf_);\n\n    var n = 0;\n    for (var i = 0; i < 5; i++) {\n      for (var j = 24; j >= 0; j -= 8) {\n        digest[n] = (this.chain_[i] >> j) & 255;\n        ++n;\n      }\n    }\n    return digest;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport type NextFn<T> = (value: T) => void;\nexport type ErrorFn = (error: Error) => void;\nexport type CompleteFn = () => void;\n\nexport interface Observer<T> {\n  // Called once for each value in a stream of values.\n  next: NextFn<T>;\n\n  // A stream terminates by a single call to EITHER error() or complete().\n  error: ErrorFn;\n\n  // No events will be sent to next() once complete() is called.\n  complete: CompleteFn;\n}\n\nexport type PartialObserver<T> = Partial<Observer<T>>;\n\n// TODO: Support also Unsubscribe.unsubscribe?\nexport type Unsubscribe = () => void;\n\n/**\n * The Subscribe interface has two forms - passing the inline function\n * callbacks, or a object interface with callback properties.\n */\nexport interface Subscribe<T> {\n  (next?: NextFn<T>, error?: ErrorFn, complete?: CompleteFn): Unsubscribe;\n  (observer: PartialObserver<T>): Unsubscribe;\n}\n\nexport interface Observable<T> {\n  // Subscribe method\n  subscribe: Subscribe<T>;\n}\n\nexport type Executor<T> = (observer: Observer<T>) => void;\n\n/**\n * Helper to make a Subscribe function (just like Promise helps make a\n * Thenable).\n *\n * @param executor Function which can make calls to a single Observer\n *     as a proxy.\n * @param onNoObservers Callback when count of Observers goes to zero.\n */\nexport function createSubscribe<T>(\n  executor: Executor<T>,\n  onNoObservers?: Executor<T>\n): Subscribe<T> {\n  let proxy = new ObserverProxy<T>(executor, onNoObservers);\n  return proxy.subscribe.bind(proxy);\n}\n\n/**\n * Implement fan-out for any number of Observers attached via a subscribe\n * function.\n */\nclass ObserverProxy<T> implements Observer<T> {\n  private observers: Array<Observer<T>> | undefined = [];\n  private unsubscribes: Unsubscribe[] = [];\n  private onNoObservers: Executor<T> | undefined;\n  private observerCount = 0;\n  // Micro-task scheduling by calling task.then().\n  private task = Promise.resolve();\n  private finalized = false;\n  private finalError: Error;\n\n  /**\n   * @param executor Function which can make calls to a single Observer\n   *     as a proxy.\n   * @param onNoObservers Callback when count of Observers goes to zero.\n   */\n  constructor(executor: Executor<T>, onNoObservers?: Executor<T>) {\n    this.onNoObservers = onNoObservers;\n    // Call the executor asynchronously so subscribers that are called\n    // synchronously after the creation of the subscribe function\n    // can still receive the very first value generated in the executor.\n    this.task\n      .then(() => {\n        executor(this);\n      })\n      .catch(e => {\n        this.error(e);\n      });\n  }\n\n  next(value: T) {\n    this.forEachObserver((observer: Observer<T>) => {\n      observer.next(value);\n    });\n  }\n\n  error(error: Error) {\n    this.forEachObserver((observer: Observer<T>) => {\n      observer.error(error);\n    });\n    this.close(error);\n  }\n\n  complete() {\n    this.forEachObserver((observer: Observer<T>) => {\n      observer.complete();\n    });\n    this.close();\n  }\n\n  /**\n   * Subscribe function that can be used to add an Observer to the fan-out list.\n   *\n   * - We require that no event is sent to a subscriber sychronously to their\n   *   call to subscribe().\n   */\n  subscribe(\n    nextOrObserver: PartialObserver<T> | Function,\n    error?: ErrorFn,\n    complete?: CompleteFn\n  ): Unsubscribe {\n    let observer: Observer<T>;\n\n    if (\n      nextOrObserver === undefined &&\n      error === undefined &&\n      complete === undefined\n    ) {\n      throw new Error('Missing Observer.');\n    }\n\n    // Assemble an Observer object when passed as callback functions.\n    if (implementsAnyMethods(nextOrObserver, ['next', 'error', 'complete'])) {\n      observer = nextOrObserver as Observer<T>;\n    } else {\n      observer = {\n        next: (nextOrObserver as any) as NextFn<T>,\n        error: error,\n        complete: complete\n      } as Observer<T>;\n    }\n\n    if (observer.next === undefined) {\n      observer.next = noop as NextFn<T>;\n    }\n    if (observer.error === undefined) {\n      observer.error = noop as ErrorFn;\n    }\n    if (observer.complete === undefined) {\n      observer.complete = noop as CompleteFn;\n    }\n\n    let unsub = this.unsubscribeOne.bind(this, this.observers!.length);\n\n    // Attempt to subscribe to a terminated Observable - we\n    // just respond to the Observer with the final error or complete\n    // event.\n    if (this.finalized) {\n      this.task.then(() => {\n        try {\n          if (this.finalError) {\n            observer.error(this.finalError);\n          } else {\n            observer.complete();\n          }\n        } catch (e) {\n          // nothing\n        }\n        return;\n      });\n    }\n\n    this.observers!.push(observer as Observer<T>);\n\n    return unsub;\n  }\n\n  // Unsubscribe is synchronous - we guarantee that no events are sent to\n  // any unsubscribed Observer.\n  private unsubscribeOne(i: number) {\n    if (this.observers === undefined || this.observers[i] === undefined) {\n      return;\n    }\n\n    delete this.observers[i];\n\n    this.observerCount -= 1;\n    if (this.observerCount === 0 && this.onNoObservers !== undefined) {\n      this.onNoObservers(this);\n    }\n  }\n\n  private forEachObserver(fn: (observer: Observer<T>) => void): void {\n    if (this.finalized) {\n      // Already closed by previous event....just eat the additional values.\n      return;\n    }\n\n    // Since sendOne calls asynchronously - there is no chance that\n    // this.observers will become undefined.\n    for (let i = 0; i < this.observers!.length; i++) {\n      this.sendOne(i, fn);\n    }\n  }\n\n  // Call the Observer via one of it's callback function. We are careful to\n  // confirm that the observe has not been unsubscribed since this asynchronous\n  // function had been queued.\n  private sendOne(i: number, fn: (observer: Observer<T>) => void): void {\n    // Execute the callback asynchronously\n    this.task.then(() => {\n      if (this.observers !== undefined && this.observers[i] !== undefined) {\n        try {\n          fn(this.observers[i]);\n        } catch (e) {\n          // Ignore exceptions raised in Observers or missing methods of an\n          // Observer.\n          // Log error to console. b/31404806\n          if (typeof console !== 'undefined' && console.error) {\n            console.error(e);\n          }\n        }\n      }\n    });\n  }\n\n  private close(err?: Error): void {\n    if (this.finalized) {\n      return;\n    }\n    this.finalized = true;\n    if (err !== undefined) {\n      this.finalError = err;\n    }\n    // Proxy is no longer needed - garbage collect references\n    this.task.then(() => {\n      this.observers = undefined;\n      this.onNoObservers = undefined;\n    });\n  }\n}\n\n/** Turn synchronous function into one called asynchronously. */\nexport function async(fn: Function, onError?: ErrorFn): Function {\n  return (...args: any[]) => {\n    Promise.resolve(true)\n      .then(() => {\n        fn(...args);\n      })\n      .catch((error: Error) => {\n        if (onError) {\n          onError(error);\n        }\n      });\n  };\n}\n\n/**\n * Return true if the object passed in implements any of the named methods.\n */\nfunction implementsAnyMethods(obj: any, methods: string[]): boolean {\n  if (typeof obj !== 'object' || obj === null) {\n    return false;\n  }\n\n  for (let method of methods) {\n    if (method in obj && typeof obj[method] === 'function') {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction noop(): void {\n  // do nothing\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Check to make sure the appropriate number of arguments are provided for a public function.\n * Throws an error if it fails.\n *\n * @param {!string} fnName The function name\n * @param {!number} minCount The minimum number of arguments to allow for the function call\n * @param {!number} maxCount The maximum number of argument to allow for the function call\n * @param {!number} argCount The actual number of arguments provided.\n */\nexport const validateArgCount = function(fnName, minCount, maxCount, argCount) {\n  var argError;\n  if (argCount < minCount) {\n    argError = 'at least ' + minCount;\n  } else if (argCount > maxCount) {\n    argError = maxCount === 0 ? 'none' : 'no more than ' + maxCount;\n  }\n  if (argError) {\n    var error =\n      fnName +\n      ' failed: Was called with ' +\n      argCount +\n      (argCount === 1 ? ' argument.' : ' arguments.') +\n      ' Expects ' +\n      argError +\n      '.';\n    throw new Error(error);\n  }\n};\n\n/**\n * Generates a string to prefix an error message about failed argument validation\n *\n * @param {!string} fnName The function name\n * @param {!number} argumentNumber The index of the argument\n * @param {boolean} optional Whether or not the argument is optional\n * @return {!string} The prefix to add to the error thrown for validation.\n */\nexport function errorPrefix(fnName, argumentNumber, optional) {\n  var argName = '';\n  switch (argumentNumber) {\n    case 1:\n      argName = optional ? 'first' : 'First';\n      break;\n    case 2:\n      argName = optional ? 'second' : 'Second';\n      break;\n    case 3:\n      argName = optional ? 'third' : 'Third';\n      break;\n    case 4:\n      argName = optional ? 'fourth' : 'Fourth';\n      break;\n    default:\n      throw new Error(\n        'errorPrefix called with argumentNumber > 4.  Need to update it?'\n      );\n  }\n\n  var error = fnName + ' failed: ';\n\n  error += argName + ' argument ';\n  return error;\n}\n\n/**\n * @param {!string} fnName\n * @param {!number} argumentNumber\n * @param {!string} namespace\n * @param {boolean} optional\n */\nexport function validateNamespace(fnName, argumentNumber, namespace, optional) {\n  if (optional && !namespace) return;\n  if (typeof namespace !== 'string') {\n    //TODO: I should do more validation here. We only allow certain chars in namespaces.\n    throw new Error(\n      errorPrefix(fnName, argumentNumber, optional) +\n        'must be a valid firebase namespace.'\n    );\n  }\n}\n\nexport function validateCallback(fnName, argumentNumber, callback, optional) {\n  if (optional && !callback) return;\n  if (typeof callback !== 'function')\n    throw new Error(\n      errorPrefix(fnName, argumentNumber, optional) +\n        'must be a valid function.'\n    );\n}\n\nexport function validateContextObject(\n  fnName,\n  argumentNumber,\n  context,\n  optional\n) {\n  if (optional && !context) return;\n  if (typeof context !== 'object' || context === null)\n    throw new Error(\n      errorPrefix(fnName, argumentNumber, optional) +\n        'must be a valid context object.'\n    );\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from './assert';\n\n// Code originally came from goog.crypt.stringToUtf8ByteArray, but for some reason they\n// automatically replaced '\\r\\n' with '\\n', and they didn't handle surrogate pairs,\n// so it's been modified.\n\n// Note that not all Unicode characters appear as single characters in JavaScript strings.\n// fromCharCode returns the UTF-16 encoding of a character - so some Unicode characters\n// use 2 characters in Javascript.  All 4-byte UTF-8 characters begin with a first\n// character in the range 0xD800 - 0xDBFF (the first character of a so-called surrogate\n// pair).\n// See http://www.ecma-international.org/ecma-262/5.1/#sec-15.1.3\n\n/**\n * @param {string} str\n * @return {Array}\n */\nexport const stringToByteArray = function(str) {\n  var out = [],\n    p = 0;\n  for (var i = 0; i < str.length; i++) {\n    var c = str.charCodeAt(i);\n\n    // Is this the lead surrogate in a surrogate pair?\n    if (c >= 0xd800 && c <= 0xdbff) {\n      var high = c - 0xd800; // the high 10 bits.\n      i++;\n      assert(i < str.length, 'Surrogate pair missing trail surrogate.');\n      var low = str.charCodeAt(i) - 0xdc00; // the low 10 bits.\n      c = 0x10000 + (high << 10) + low;\n    }\n\n    if (c < 128) {\n      out[p++] = c;\n    } else if (c < 2048) {\n      out[p++] = (c >> 6) | 192;\n      out[p++] = (c & 63) | 128;\n    } else if (c < 65536) {\n      out[p++] = (c >> 12) | 224;\n      out[p++] = ((c >> 6) & 63) | 128;\n      out[p++] = (c & 63) | 128;\n    } else {\n      out[p++] = (c >> 18) | 240;\n      out[p++] = ((c >> 12) & 63) | 128;\n      out[p++] = ((c >> 6) & 63) | 128;\n      out[p++] = (c & 63) | 128;\n    }\n  }\n  return out;\n};\n\n/**\n * Calculate length without actually converting; useful for doing cheaper validation.\n * @param {string} str\n * @return {number}\n */\nexport const stringLength = function(str) {\n  var p = 0;\n  for (var i = 0; i < str.length; i++) {\n    var c = str.charCodeAt(i);\n    if (c < 128) {\n      p++;\n    } else if (c < 2048) {\n      p += 2;\n    } else if (c >= 0xd800 && c <= 0xdbff) {\n      // Lead surrogate of a surrogate pair.  The pair together will take 4 bytes to represent.\n      p += 4;\n      i++; // skip trail surrogate.\n    } else {\n      p += 3;\n    }\n  }\n  return p;\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseNamespace } from '@firebase/app-types';\nimport { createFirebaseNamespace } from './src/firebaseNamespace';\n\n// Node detection logic from: https://github.com/iliakan/detect-node/\nlet isNode = false;\ntry {\n  isNode =\n    Object.prototype.toString.call(global.process) === '[object process]';\n} catch (e) {}\n\nisNode &&\n  console.warn(`\nWarning: This is a browser-targeted Firebase bundle but it appears it is being\nrun in a Node environment.  If running in a Node environment, make sure you\nare using the bundle specified by the \"main\" field in package.json.\n\nIf you are using Webpack, you can specify \"main\" as the first item in\n\"resolve.mainFields\":\nhttps://webpack.js.org/configuration/resolve/#resolvemainfields\n\nIf using Rollup, use the rollup-plugin-node-resolve plugin and set \"module\"\nto false and \"main\" to true:\nhttps://github.com/rollup/rollup-plugin-node-resolve\n`);\n\n// Firebase Lite detection\nif (self && 'firebase' in self) {\n  console.warn(`\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  `);\n\n  const sdkVersion = ((self as any).firebase as FirebaseNamespace).SDK_VERSION;\n  if (sdkVersion && sdkVersion.indexOf('LITE') >= 0) {\n    console.warn(`\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    `);\n  }\n}\n\nexport const firebase = createFirebaseNamespace();\n\nexport default firebase;\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FirebaseApp,\n  FirebaseOptions,\n  FirebaseAppConfig\n} from '@firebase/app-types';\nimport {\n  _FirebaseApp,\n  _FirebaseNamespace,\n  FirebaseService,\n  FirebaseAppInternals\n} from '@firebase/app-types/private';\nimport { deepCopy, deepExtend } from '@firebase/util';\nimport { error, AppError } from './errors';\nimport { DEFAULT_ENTRY_NAME } from './constants';\n\ninterface ServicesCache {\n  [name: string]: {\n    [serviceName: string]: FirebaseService;\n  };\n}\n\n// An array to capture listeners before the true auth functions\n// exist\nlet tokenListeners: any[] = [];\n\n/**\n * Global context object for a collection of services using\n * a shared authentication state.\n */\nexport class FirebaseAppImpl implements FirebaseApp {\n  private readonly options_: FirebaseOptions;\n  private readonly name_: string;\n  private isDeleted_ = false;\n  private services_: ServicesCache = {};\n  private automaticDataCollectionEnabled_: boolean;\n\n  INTERNAL: FirebaseAppInternals;\n\n  constructor(\n    options: FirebaseOptions,\n    config: FirebaseAppConfig,\n    private readonly firebase_: _FirebaseNamespace\n  ) {\n    this.name_ = config.name!;\n    this.automaticDataCollectionEnabled_ =\n      config.automaticDataCollectionEnabled || false;\n    this.options_ = deepCopy<FirebaseOptions>(options);\n    this.INTERNAL = {\n      getUid: () => null,\n      getToken: () => Promise.resolve(null),\n      addAuthTokenListener: (callback: (token: string | null) => void) => {\n        tokenListeners.push(callback);\n        // Make sure callback is called, asynchronously, in the absence of the auth module\n        setTimeout(() => callback(null), 0);\n      },\n      removeAuthTokenListener: callback => {\n        tokenListeners = tokenListeners.filter(\n          listener => listener !== callback\n        );\n      }\n    };\n  }\n\n  get automaticDataCollectionEnabled(): boolean {\n    this.checkDestroyed_();\n    return this.automaticDataCollectionEnabled_;\n  }\n\n  set automaticDataCollectionEnabled(val) {\n    this.checkDestroyed_();\n    this.automaticDataCollectionEnabled_ = val;\n  }\n\n  get name(): string {\n    this.checkDestroyed_();\n    return this.name_;\n  }\n\n  get options(): FirebaseOptions {\n    this.checkDestroyed_();\n    return this.options_;\n  }\n\n  delete(): Promise<void> {\n    return new Promise(resolve => {\n      this.checkDestroyed_();\n      resolve();\n    })\n      .then(() => {\n        this.firebase_.INTERNAL.removeApp(this.name_);\n        const services: FirebaseService[] = [];\n\n        for (const serviceKey of Object.keys(this.services_)) {\n          for (const instanceKey of Object.keys(this.services_[serviceKey])) {\n            services.push(this.services_[serviceKey][instanceKey]);\n          }\n        }\n\n        return Promise.all(\n          services.map(service => {\n            return service.INTERNAL.delete();\n          })\n        );\n      })\n      .then(\n        (): void => {\n          this.isDeleted_ = true;\n          this.services_ = {};\n        }\n      );\n  }\n\n  /**\n   * Return a service instance associated with this app (creating it\n   * on demand), identified by the passed instanceIdentifier.\n   *\n   * NOTE: Currently storage is the only one that is leveraging this\n   * functionality. They invoke it by calling:\n   *\n   * ```javascript\n   * firebase.app().storage('STORAGE BUCKET ID')\n   * ```\n   *\n   * The service name is passed to this already\n   * @internal\n   */\n  _getService(\n    name: string,\n    instanceIdentifier: string = DEFAULT_ENTRY_NAME\n  ): FirebaseService {\n    this.checkDestroyed_();\n\n    if (!this.services_[name]) {\n      this.services_[name] = {};\n    }\n\n    if (!this.services_[name][instanceIdentifier]) {\n      /**\n       * If a custom instance has been defined (i.e. not '[DEFAULT]')\n       * then we will pass that instance on, otherwise we pass `null`\n       */\n      const instanceSpecifier =\n        instanceIdentifier !== DEFAULT_ENTRY_NAME\n          ? instanceIdentifier\n          : undefined;\n      const service = this.firebase_.INTERNAL.factories[name](\n        this,\n        this.extendApp.bind(this),\n        instanceSpecifier\n      );\n      this.services_[name][instanceIdentifier] = service;\n    }\n\n    return this.services_[name][instanceIdentifier];\n  }\n\n  /**\n   * Callback function used to extend an App instance at the time\n   * of service instance creation.\n   */\n  private extendApp(props: { [name: string]: any }): void {\n    // Copy the object onto the FirebaseAppImpl prototype\n    deepExtend(this, props);\n\n    /**\n     * If the app has overwritten the addAuthTokenListener stub, forward\n     * the active token listeners on to the true fxn.\n     *\n     * TODO: This function is required due to our current module\n     * structure. Once we are able to rely strictly upon a single module\n     * implementation, this code should be refactored and Auth should\n     * provide these stubs and the upgrade logic\n     */\n    if (props.INTERNAL && props.INTERNAL.addAuthTokenListener) {\n      tokenListeners.forEach(listener => {\n        this.INTERNAL.addAuthTokenListener(listener);\n      });\n      tokenListeners = [];\n    }\n  }\n\n  /**\n   * This function will throw an Error if the App has already been deleted -\n   * use before performing API actions on the App.\n   */\n  private checkDestroyed_(): void {\n    if (this.isDeleted_) {\n      error(AppError.APP_DELETED, { name: this.name_ });\n    }\n  }\n}\n\n// Prevent dead-code elimination of these methods w/o invalid property\n// copying.\n(FirebaseAppImpl.prototype.name && FirebaseAppImpl.prototype.options) ||\n  FirebaseAppImpl.prototype.delete ||\n  console.log('dc');\n","/**\n * @license\n * Copyright 2019 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FirebaseApp,\n  FirebaseOptions,\n  FirebaseNamespace,\n  FirebaseAppConfig\n} from '@firebase/app-types';\nimport {\n  _FirebaseApp,\n  _FirebaseNamespace,\n  FirebaseService,\n  FirebaseServiceFactory,\n  FirebaseServiceNamespace,\n  AppHook\n} from '@firebase/app-types/private';\nimport { deepExtend, patchProperty } from '@firebase/util';\nimport { FirebaseAppImpl } from './firebaseApp';\nimport { error, AppError } from './errors';\nimport { FirebaseAppLiteImpl } from './lite/firebaseAppLite';\nimport { DEFAULT_ENTRY_NAME } from './constants';\n\nfunction contains(obj: object, key: string) {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}\n\n/**\n * Because auth can't share code with other components, we attach the utility functions\n * in an internal namespace to share code.\n * This function return a firebase namespace object without\n * any utility functions, so it can be shared between the regular firebaseNamespace and\n * the lite version.\n */\nexport function createFirebaseNamespaceCore(\n  firebaseAppImpl: typeof FirebaseAppImpl | typeof FirebaseAppLiteImpl\n): FirebaseNamespace {\n  const apps: { [name: string]: FirebaseApp } = {};\n  const factories: { [service: string]: FirebaseServiceFactory } = {};\n  const appHooks: { [service: string]: AppHook } = {};\n\n  // A namespace is a plain JavaScript Object.\n  const namespace: FirebaseNamespace = {\n    // Hack to prevent Babel from modifying the object returned\n    // as the firebase namespace.\n    // @ts-ignore\n    __esModule: true,\n    initializeApp: initializeApp,\n    app: app as any,\n    apps: null as any,\n    SDK_VERSION: '${JSCORE_VERSION}',\n    INTERNAL: {\n      registerService,\n      removeApp,\n      factories,\n      useAsService\n    }\n  };\n\n  // Inject a circular default export to allow Babel users who were previously\n  // using:\n  //\n  //   import firebase from 'firebase';\n  //   which becomes: var firebase = require('firebase').default;\n  //\n  // instead of\n  //\n  //   import * as firebase from 'firebase';\n  //   which becomes: var firebase = require('firebase');\n  patchProperty(namespace, 'default', namespace);\n\n  // firebase.apps is a read-only getter.\n  Object.defineProperty(namespace, 'apps', {\n    get: getApps\n  });\n\n  /**\n   * Called by App.delete() - but before any services associated with the App\n   * are deleted.\n   */\n  function removeApp(name: string): void {\n    const app = apps[name];\n    callAppHooks(app, 'delete');\n    delete apps[name];\n  }\n\n  /**\n   * Get the App object for a given name (or DEFAULT).\n   */\n  function app(name?: string): FirebaseApp {\n    name = name || DEFAULT_ENTRY_NAME;\n    if (!contains(apps, name)) {\n      error(AppError.NO_APP, { name: name });\n    }\n    return apps[name];\n  }\n\n  patchProperty(app, 'App', firebaseAppImpl);\n  /**\n   * Create a new App instance (name must be unique).\n   */\n  function initializeApp(\n    options: FirebaseOptions,\n    config?: FirebaseAppConfig\n  ): FirebaseApp;\n  function initializeApp(options: FirebaseOptions, name?: string): FirebaseApp;\n  function initializeApp(options: FirebaseOptions, rawConfig = {}) {\n    if (typeof rawConfig !== 'object' || rawConfig === null) {\n      const name = rawConfig;\n      rawConfig = { name };\n    }\n\n    const config = rawConfig as FirebaseAppConfig;\n\n    if (config.name === undefined) {\n      config.name = DEFAULT_ENTRY_NAME;\n    }\n\n    const { name } = config;\n\n    if (typeof name !== 'string' || !name) {\n      error(AppError.BAD_APP_NAME, { name: String(name) });\n    }\n\n    if (contains(apps, name)) {\n      error(AppError.DUPLICATE_APP, { name: name });\n    }\n\n    const app = new firebaseAppImpl(\n      options,\n      config,\n      namespace as _FirebaseNamespace\n    );\n\n    apps[name] = app;\n    callAppHooks(app, 'create');\n\n    return app;\n  }\n\n  /*\n   * Return an array of all the non-deleted FirebaseApps.\n   */\n  function getApps(): FirebaseApp[] {\n    // Make a copy so caller cannot mutate the apps list.\n    return Object.keys(apps).map(name => apps[name]);\n  }\n\n  /*\n   * Register a Firebase Service.\n   *\n   * firebase.INTERNAL.registerService()\n   *\n   * TODO: Implement serviceProperties.\n   */\n  function registerService(\n    name: string,\n    createService: FirebaseServiceFactory,\n    serviceProperties?: { [prop: string]: unknown },\n    appHook?: AppHook,\n    allowMultipleInstances = false\n  ): FirebaseServiceNamespace<FirebaseService> {\n    // Cannot re-register a service that already exists\n    if (factories[name]) {\n      error(AppError.DUPLICATE_SERVICE, { name: name });\n    }\n\n    // Capture the service factory for later service instantiation\n    factories[name] = createService;\n\n    // Capture the appHook, if passed\n    if (appHook) {\n      appHooks[name] = appHook;\n\n      // Run the **new** app hook on all existing apps\n      getApps().forEach(app => {\n        appHook('create', app);\n      });\n    }\n\n    // The Service namespace is an accessor function ...\n    function serviceNamespace(appArg: FirebaseApp = app()) {\n      if (typeof appArg[name] !== 'function') {\n        // Invalid argument.\n        // This happens in the following case: firebase.storage('gs:/')\n        error(AppError.INVALID_APP_ARGUMENT, { name: name });\n      }\n\n      // Forward service instance lookup to the FirebaseApp.\n      return appArg[name]();\n    }\n\n    // ... and a container for service-level properties.\n    if (serviceProperties !== undefined) {\n      deepExtend(serviceNamespace, serviceProperties);\n    }\n\n    // Monkey-patch the serviceNamespace onto the firebase namespace\n    namespace[name] = serviceNamespace;\n\n    // Patch the FirebaseAppImpl prototype\n    firebaseAppImpl.prototype[name] = function(...args) {\n      const serviceFxn = this._getService.bind(this, name);\n      return serviceFxn.apply(this, allowMultipleInstances ? args : []);\n    };\n\n    return serviceNamespace;\n  }\n\n  function callAppHooks(app: FirebaseApp, eventName: string) {\n    for (const serviceName of Object.keys(factories)) {\n      // Ignore virtual services\n      const factoryName = useAsService(app, serviceName);\n      if (factoryName === null) {\n        return;\n      }\n\n      if (appHooks[factoryName]) {\n        appHooks[factoryName](eventName, app);\n      }\n    }\n  }\n\n  // Map the requested service to a registered service name\n  // (used to map auth to serverAuth service when needed).\n  function useAsService(app: FirebaseApp, name: string): string | null {\n    if (name === 'serverAuth') {\n      return null;\n    }\n\n    const useService = name;\n\n    return useService;\n  }\n\n  return namespace;\n}\n","/**\n * @license\n * Copyright 2019 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseNamespace } from '@firebase/app-types';\nimport { _FirebaseApp, _FirebaseNamespace } from '@firebase/app-types/private';\nimport { createSubscribe, deepExtend, ErrorFactory } from '@firebase/util';\nimport { FirebaseAppImpl } from './firebaseApp';\nimport { createFirebaseNamespaceCore } from './firebaseNamespaceCore';\n\n/**\n * Return a firebase namespace object.\n *\n * In production, this will be called exactly once and the result\n * assigned to the 'firebase' global.  It may be called multiple times\n * in unit tests.\n */\nexport function createFirebaseNamespace(): FirebaseNamespace {\n  const namespace = createFirebaseNamespaceCore(FirebaseAppImpl);\n  (namespace as _FirebaseNamespace).INTERNAL = {\n    ...(namespace as _FirebaseNamespace).INTERNAL,\n    createFirebaseNamespace: createFirebaseNamespace,\n    extendNamespace: extendNamespace,\n    createSubscribe: createSubscribe,\n    ErrorFactory: ErrorFactory,\n    deepExtend: deepExtend\n  };\n\n  /**\n   * Patch the top-level firebase namespace with additional properties.\n   *\n   * firebase.INTERNAL.extendNamespace()\n   */\n  function extendNamespace(props: { [prop: string]: unknown }): void {\n    deepExtend(namespace, props);\n  }\n\n  return namespace;\n}\n","export const noop = () => {};\n\nexport const trim = (raw = '') => `${raw}`.trim();\nexport const lowercase = (raw = '') => `${raw}`.toLowerCase();\nexport const spacesToDashs = (raw = '') => `${raw}`.replace(/\\s+/g, '-');\n\nexport const rAF = ({ wait } = { wait: 0 }) =>\n  new Promise(resolve => {\n    setTimeout(() => {\n      resolve(window.requestAnimationFrame);\n    }, wait);\n  });\n\nexport const select = document.querySelector.bind(document);\nexport const selectAll = document.querySelectorAll.bind(document);\nexport const setAttrs = (node, attrs = {}) => {\n  if (!node) return node; // TODO also check if it is a DOM node\n\n  return Object.keys(attrs).reduce((el, key) => {\n    el.setAttribute(key, attrs[key]);\n    return el;\n  }, node);\n};\n\nexport const once = (fn, ...args) => {\n  let output;\n  return () => {\n    if (!output) {\n      output = fn(...args);\n    }\n    return output;\n  };\n};\n\nconst body = once(select, 'body');\nexport const goTo = (view, data = {}, url = `/!#${view}`) => {\n  rAF().then(() => {\n    body().setAttribute('data-nav', view);\n    const current = select('[data-view].active');\n    if (current) current.classList.remove('active');\n\n    const next = select(`[data-view=${view}]`);\n    if (next) next.classList.add('active');\n  });\n  \n  const state = { ...data, ...{ view } };\n  let expandedUrl = data.id ? `${url}/${data.id}` : url;\n  expandedUrl = data.test ? `/${data.test}${expandedUrl}` : expandedUrl;\n\n  window.history.pushState(state, '', expandedUrl);\n};\n\nexport const handleWindowPopState = () => {\n  window.onpopstate = ({ state }) => {\n    if (!state) return;\n\n    const { view } = state;\n    goTo(view);\n  };\n};\n\nexport const exceptId = (map = {}) =>\n  Object.keys(map)\n    .filter(key => key !== 'id')\n    .reduce(\n      (partial, key) => ({\n        ...partial,\n        [key]: map[key]\n      }),\n      {}\n    );\n\nexport const extractCode = code => {\n  const styles = trim(\n    code.substring(code.indexOf('<style>') + 7, code.indexOf('</style>'))\n  );\n\n  const script = trim(\n    code.substring(code.indexOf('<script>') + 8, code.indexOf('</script>'))\n  );\n\n  const markup = trim(\n    code.substring(code.indexOf('<body>') + 6, code.indexOf('<script>'))\n  );\n\n  return {\n    styles,\n    markup,\n    script\n  };\n};\n\nexport const syncChain = (...fns) =>\n  function chainr(data) {\n    return fns.reduce((partial, fn) => fn(partial), data);\n  };\n\nexport const asyncChain = (...challenges) =>\n  function glue(codebase) {\n    return challenges.reduce((prevAudit, challenge) => {\n      return prevAudit.then(partial => challenge(partial));\n    }, Promise.resolve(codebase));\n  };\n\nexport const toSlug = syncChain(trim, lowercase, spacesToDashs);\n\nexport const loadStylesAndScripts = (...urls) => {\n  const loadError = oError => {\n    throw new URIError(\n      `The resource ${oError.target.src} didn't load correctly.`\n    );\n  };\n\n  const isValidURL = url => url && typeof url === 'string' && url.trim() !== '';\n\n  const js = url =>\n    new Promise(resolve => {\n      const script = document.createElement('script');\n      script.onerror = loadError;\n      script.setAttribute('type', 'text/javascript');\n      document.body.appendChild(script);\n      script.onload = resolve;\n      script.src = url;\n    });\n\n  const css = url =>\n    new Promise(resolve => {\n      const link = document.createElement('link');\n      link.setAttribute('rel', 'stylesheet');\n      link.onerror = loadError;\n      document.head.appendChild(link);\n      link.onload = resolve;\n      link.href = url;\n    });\n\n  const handleAsset = url => {\n    if (url.endsWith('.js')) return js(url);\n\n    if (url.endsWith('.css')) return css(url);\n\n    return Promise.resolve();\n  };\n\n  return urls\n    .filter(isValidURL)\n    .reduce(\n      (prevLoadOp, url) => prevLoadOp.then(() => handleAsset(url)),\n      Promise.resolve()\n    );\n};\n\nconst codeMirrorAssets = mode => {\n  const assets = {\n    markdown: [\n      'https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.42.2/theme/idea.min.css',\n      'https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.42.2/mode/markdown/markdown.min.js'\n    ],\n    htmlmixed: [\n      'https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.42.2/theme/idea.min.css',\n      'https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.42.2/mode/xml/xml.min.js',\n      'https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.42.2/mode/javascript/javascript.min.js',\n      'https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.42.2/mode/css/css.min.js',\n      'https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.42.2/mode/htmlmixed/htmlmixed.min.js',\n      'https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.42.2/addon/edit/matchbrackets.min.js',\n      'https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.42.2/addon/edit/closebrackets.min.js'\n    ]\n  };\n  return assets[mode] || [];\n};\n\nexport const loadCodemirrorAssets = ({ mode }) => {\n  const modeSpecificAssets = codeMirrorAssets(mode);\n  return loadStylesAndScripts(\n    'https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.42.2/codemirror.min.css',\n    'https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.42.2/codemirror.min.js',\n    ...modeSpecificAssets\n  );\n};\n\nexport const responseCanErr = response => {\n  if (!response.ok) throw Error(response.status);\n  return response;\n};\n\nexport const afterKickoff = args => {\n  const { when = Date.now(), startingAt } = args;\n  const limit = new Date(`${startingAt}`);\n\n  limit.setTime(limit.getTime() + limit.getTimezoneOffset() * 60 * 1000);\n  return when >= limit.getTime();\n};\n\nexport const withinDeadline = args => {\n  const { when = Date.now(), endingAt } = args;\n  const limit = new Date(`${endingAt}`);\n\n  limit.setTime(limit.getTime() + limit.getTimezoneOffset() * 60 * 1000);\n  return when <= limit.getTime();\n};\n\nconst timeUnits = {\n  second: 1000,\n  minute: 1000 * 60,\n  hour: 1000 * 60 * 60,\n  day: 1000 * 60 * 60 * 24\n};\n\nexport const dateTimeDiff = (currentDate, endDate, type = 'day') => {\n  const diffType = Object.keys(timeUnits).includes(type) ? type : 'day';\n  const unitDiff = timeUnits[diffType];\n\n  const endDateMs =\n    typeof endDate === 'object'\n      ? endDate.getTime()\n      : new Date(endDate).getTime();\n  const currentDateMs =\n    typeof currentDate === 'object'\n      ? currentDate.getTime()\n      : new Date(currentDate).getTime();\n      \n  const diffMs = endDateMs - currentDateMs;\n\n  return Math.round(diffMs / unitDiff);\n};\n\nexport const countDown = args => {\n  \n  const run = () => {\n    const { from = Date.now(), to, callback = noop, type = 'day' } = args;\n    const diff = dateTimeDiff(from, to, type);\n\n    callback(diff);\n    rAF({ wait: timeUnits[type] }).then(() => run());\n  };\n  run();\n\n  // const diffTypes = Object.keys(timeUnits);\n  // const nextRun = diffTypes.indexOf(type) === 0 ?\n  // const intervalId = setInterval(() => {}, nextRun);\n};\n\n// export const recursiveDateTimeDiff = ( currentDate, endDate, type = 'day' ) => {\n//   const diff = dateTimeDiff(currentDate, endDate, type);\n// };\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var getBundleURL = require('./bundle-url').getBundleURL;\n\nfunction loadBundlesLazy(bundles) {\n  if (!Array.isArray(bundles)) {\n    bundles = [bundles]\n  }\n\n  var id = bundles[bundles.length - 1];\n\n  try {\n    return Promise.resolve(require(id));\n  } catch (err) {\n    if (err.code === 'MODULE_NOT_FOUND') {\n      return new LazyPromise(function (resolve, reject) {\n        loadBundles(bundles.slice(0, -1))\n          .then(function () {\n            return require(id);\n          })\n          .then(resolve, reject);\n      });\n    }\n\n    throw err;\n  }\n}\n\nfunction loadBundles(bundles) {\n  return Promise.all(bundles.map(loadBundle));\n}\n\nvar bundleLoaders = {};\nfunction registerBundleLoader(type, loader) {\n  bundleLoaders[type] = loader;\n}\n\nmodule.exports = exports = loadBundlesLazy;\nexports.load = loadBundles;\nexports.register = registerBundleLoader;\n\nvar bundles = {};\nfunction loadBundle(bundle) {\n  var id;\n  if (Array.isArray(bundle)) {\n    id = bundle[1];\n    bundle = bundle[0];\n  }\n\n  if (bundles[bundle]) {\n    return bundles[bundle];\n  }\n\n  var type = (bundle.substring(bundle.lastIndexOf('.') + 1, bundle.length) || bundle).toLowerCase();\n  var bundleLoader = bundleLoaders[type];\n  if (bundleLoader) {\n    return bundles[bundle] = bundleLoader(getBundleURL() + bundle)\n      .then(function (resolved) {\n        if (resolved) {\n          module.bundle.register(id, resolved);\n        }\n\n        return resolved;\n      }).catch(function(e) {\n        delete bundles[bundle];\n        \n        throw e;\n      });\n  }\n}\n\nfunction LazyPromise(executor) {\n  this.executor = executor;\n  this.promise = null;\n}\n\nLazyPromise.prototype.then = function (onSuccess, onError) {\n  if (this.promise === null) this.promise = new Promise(this.executor)\n  return this.promise.then(onSuccess, onError)\n};\n\nLazyPromise.prototype.catch = function (onError) {\n  if (this.promise === null) this.promise = new Promise(this.executor)\n  return this.promise.catch(onError)\n};\n","export const importFirebaseInitializer = () => import('../../commons/js/fb-init.js');\nexport const importPlayground = () => import('./playground.js');","import firebase from 'firebase/app';\n\nimport {\n  trim,\n  goTo,\n  select,\n  afterKickoff,\n  loadStylesAndScripts,\n  handleWindowPopState\n} from '../../commons/js/utils.js';\n\nimport {\n  importPlayground,\n  importFirebaseInitializer\n} from './module-manager.js';\n\nlet toast;\nlet testId;\nlet appUser;\nlet provider;\nlet uiIsBuilt = false;\nconst invalidURLMsg = 'Awwww Snaaap :( Your Assesment URL Is Invalid.';\nconst testNotYetOpenMsg = `I see you're an early bird. However, this assessment is not yet open.`;\n\nconst notify = msg => {\n  if (!toast || trim(msg) === '') return;\n\n  select('#intro-toast .mdc-snackbar__label').textContent = msg;\n  toast.open();\n};\n\nconst signIn = () => {\n  if (!provider) return;\n\n  firebase\n    .auth()\n    .signInWithPopup(provider)\n    .catch(error => {\n      notify(\n        'Potential network error. Please refresh and try again!'\n      );\n\n      const { code, message } = error;\n      console.warn(`${code} => ${message}`);\n    });\n};\n\nconst setupSignIn = () => {\n  if (uiIsBuilt === true) return;\n\n  const signInBtn = select(`[data-view='home'] button`);\n  if (signInBtn) {\n    signInBtn.addEventListener('click', signIn);\n    signInBtn.classList.add('live');\n  }\n  uiIsBuilt = true;\n};\n\nconst fetchTheImpliedAssessment = () => {\n  notify('Still busy, please wait ...');\n  const assessmentId = testId\n    .split('')\n    .reverse()\n    .join('');\n\n  return firebase\n    .firestore()\n    .collection('assessments')\n    .doc(assessmentId)\n    .get();\n};\n\nconst initFirebase = fb => new Promise(resolve => {\n  notify('Busy, please wait ...');\n  fb.init();\n  resolve();\n});\n\nconst checkIfAssessmentIsValid = assessmentDoc => new Promise((resolve, reject) => {\n  if (assessmentDoc.exists) {\n    resolve(assessmentDoc);\n    return;\n  }\n\n  notify(invalidURLMsg);\n  reject();\n});\n\nconst checkIfAssessmentIsLive = assessmentDoc => new Promise((resolve, reject) => {\n  const { startingAt } = assessmentDoc.data();\n  if (afterKickoff({ startingAt })) {\n    resolve(assessmentDoc);\n    return;\n  }\n\n  const msg = `${testNotYetOpenMsg} Do check back on ${new Date(startingAt)}`;\n  notify(testNotYetOpenMsg);\n  select(`[data-view='intro'] h3.mdc-typography--headline5`).textContent = msg;\n\n  reject();\n});\n\nconst enterPlayground = assessment => new Promise(resolve => {\n  notify('Busy, loading payground resources  ...');\n  importPlayground().then(playground => {\n    playground.enter({ user: appUser, test: testId, assessmentDoc: assessment });\n    resolve();\n  });\n});\n\nconst enterHome = (testId) => {\n  select('body').removeAttribute('data-auth');\n  goTo('home', { test: testId });\n};\n\nconst initServiceBot = () => loadStylesAndScripts('/engines/service-bot.js');\n\nconst setupAuthentication = () => new Promise(resolve => {\n  provider = new firebase.auth.GithubAuthProvider();\n  provider.addScope('repo');\n  provider.setCustomParameters({\n    allow_signup: 'false'\n  });\n\n  firebase.auth().onAuthStateChanged(user => {\n    if (!user) {\n      enterHome(testId);\n      setupSignIn();\n      resolve();\n      return;\n    }\n\n    appUser = user;\n    fetchTheImpliedAssessment()\n      .then(checkIfAssessmentIsValid)\n      .then(checkIfAssessmentIsLive)\n      .then(enterPlayground)\n      .then(initServiceBot)\n      .then(resolve)\n      .catch(() => {\n      });\n  });\n});\n\nconst takeOff = () => {\n  handleWindowPopState();\n\n  toast = mdc.snackbar.MDCSnackbar.attachTo(select('#intro-toast'));\n  const { pathname } = window.location;\n\n  if (pathname === '/' || pathname === '/!') {\n    enterHome();\n    notify(invalidURLMsg);\n    return;\n  }\n\n  const matches = pathname.match(/\\/(.+)/);\n  if (matches && matches[1]) {\n    testId = matches[1].replace(/\\/?!?$/, '');\n\n    if (!testId) {\n      enterHome();\n      notify(invalidURLMsg);\n      return;\n    }\n\n    notify('Busy. Loading Critical Assets. Please Wait ...');\n    importFirebaseInitializer()\n      .then(initFirebase)\n      .then(setupAuthentication);\n  }\n};\n\ndocument.addEventListener('DOMContentLoaded', takeOff);\n","module.exports = function loadJSBundle(bundle) {\n  return new Promise(function (resolve, reject) {\n    var script = document.createElement('script');\n    script.async = true;\n    script.type = 'text/javascript';\n    script.charset = 'utf-8';\n    script.src = bundle;\n    script.onerror = function (e) {\n      script.onerror = script.onload = null;\n      reject(e);\n    };\n\n    script.onload = function () {\n      script.onerror = script.onload = null;\n      resolve();\n    };\n\n    document.getElementsByTagName('head')[0].appendChild(script);\n  });\n};\n"]}